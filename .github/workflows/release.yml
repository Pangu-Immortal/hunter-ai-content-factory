# Hunter AI å†…å®¹å·¥å‚ - è‡ªåŠ¨å‘å¸ƒå·¥ä½œæµ
#
# åŠŸèƒ½ï¼š
# - å½“æ¨é€ v* æ ‡ç­¾æ—¶è‡ªåŠ¨åˆ›å»º GitHub Release
# - ç”Ÿæˆæ›´æ–°æ—¥å¿—
#
# ä½¿ç”¨æ–¹æ³•ï¼š
# git tag v1.0.0
# git push origin v1.0.0

name: Release

on:
  push:
    tags:
      - 'v*'

permissions:
  contents: write

jobs:
  release:
    name: åˆ›å»ºå‘å¸ƒ
    runs-on: ubuntu-latest

    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ç”Ÿæˆæ›´æ–°æ—¥å¿—
        id: changelog
        uses: orhun/git-cliff-action@v3
        with:
          config: cliff.toml
          args: --latest --strip header
        continue-on-error: true

      - name: åˆ›å»º GitHub Release
        uses: softprops/action-gh-release@v1
        with:
          body: |
            ## ğŸ¦… Hunter AI å†…å®¹å·¥å‚ ${{ github.ref_name }}

            ### æ›´æ–°å†…å®¹
            ${{ steps.changelog.outputs.content || 'è¯·æŸ¥çœ‹ commit å†å²è·å–è¯¦ç»†æ›´æ–°å†…å®¹' }}

            ### å¿«é€Ÿå¼€å§‹
            ```bash
            # Mac / Linux
            bash run.sh

            # Windows
            run.bat
            ```

            ### ç›¸å…³é“¾æ¥
            - ğŸ“– [ä½¿ç”¨æ–‡æ¡£](README.md)
            - ğŸ› [é—®é¢˜åé¦ˆ](https://github.com/Pangu-Immortal/hunter-ai-content-factory/issues)
            - ğŸ’¬ [QQ ç¾¤ï¼š794834282](https://qm.qq.com/q/794834282)
          draft: false
          prerelease: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
